# ðŸš€ æ— äººæœºè§†è§‰ç³»ç»Ÿ - ç¨³å®šäº‘ç«¯éƒ¨ç½²æ–¹æ¡ˆï¼ˆå®Œæ•´ç‰ˆï¼‰

## ðŸ“‹ é—®é¢˜è¯´æ˜Ž

**å½“å‰é—®é¢˜**ï¼šStreamlit Cloud å…è´¹ç‰ˆä¼šåœ¨æ— æ´»åŠ¨æ—¶è¿›å…¥ sleep çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…å”¤é†’ï¼Œå½±å“ä½¿ç”¨ä½“éªŒã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨çœŸæ­£çš„äº‘ç«¯æœåŠ¡å™¨éƒ¨ç½²ï¼Œç¡®ä¿ 24/7 ç¨³å®šè¿è¡Œã€‚

---

## ðŸŽ¯ æŽ¨èæ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | è´¹ç”¨ | å›½å†…è®¿é—® | æŽ¨èåº¦ |
|------|------|------|------|----------|--------|
| **Railway** | ç®€å•ã€å¿«é€Ÿã€å…è´¹é¢åº¦å……è¶³ | å…è´¹ç‰ˆæœ‰ä½¿ç”¨é™åˆ¶ | å…è´¹/ä»˜è´¹ | âœ… è¾ƒå¥½ | â­â­â­â­â­ |
| **Render** | ç¨³å®šã€æ˜“ç”¨ | å…è´¹ç‰ˆä¼š sleep | å…è´¹/ä»˜è´¹ | âœ… è¾ƒå¥½ | â­â­â­â­ |
| **Fly.io** | å…¨çƒéƒ¨ç½²ã€æ€§èƒ½å¥½ | é…ç½®ç¨å¤æ‚ | å…è´¹/ä»˜è´¹ | âœ… å¥½ | â­â­â­â­ |
| **å›½å†…äº‘æœåŠ¡å™¨** | æœ€ç¨³å®šã€é€Ÿåº¦å¿« | éœ€è¦ä»˜è´¹ | ä»˜è´¹ | âœ…âœ… æœ€å¥½ | â­â­â­â­â­ |
| **Docker + VPS** | æœ€çµæ´» | éœ€è¦æŠ€æœ¯åŸºç¡€ | ä»˜è´¹ | âœ… å¥½ | â­â­â­ |

---

## æ–¹æ¡ˆä¸€ï¼šRailway éƒ¨ç½²ï¼ˆæŽ¨èâ­â­â­â­â­ï¼‰

### ä¼˜ç‚¹
- âœ… å…è´¹é¢åº¦å……è¶³ï¼ˆ$5/æœˆå…è´¹é¢åº¦ï¼‰
- âœ… ç®€å•æ˜“ç”¨ï¼ŒGitHub ä¸€é”®éƒ¨ç½²
- âœ… ä¸ä¼š sleepï¼Œ24/7 è¿è¡Œ
- âœ… å›½å†…è®¿é—®é€Ÿåº¦è¾ƒå¥½
- âœ… æ”¯æŒè‡ªå®šä¹‰åŸŸå

### éƒ¨ç½²æ­¥éª¤

#### 1. æ³¨å†Œ Railway è´¦å·

```powershell
# è®¿é—® Railway å®˜ç½‘
# https://railway.app
# ä½¿ç”¨ GitHub è´¦å·ç™»å½•ï¼ˆæŽ¨èï¼‰
```

#### 2. åˆ›å»ºæ–°é¡¹ç›®

1. ç™»å½• Railway
2. ç‚¹å‡» "New Project"
3. é€‰æ‹© "Deploy from GitHub repo"
4. é€‰æ‹©ä½ çš„ä»“åº“ï¼š`Andylee56-cyber/drone-material-generator`
5. ç‚¹å‡» "Deploy Now"

#### 3. é…ç½®çŽ¯å¢ƒå˜é‡ï¼ˆå¦‚æžœéœ€è¦ï¼‰

åœ¨ Railway é¡¹ç›®è®¾ç½®ä¸­ï¼š
- ç‚¹å‡»é¡¹ç›® â†’ Settings â†’ Variables
- æ·»åŠ çŽ¯å¢ƒå˜é‡ï¼ˆå¦‚æžœæœ‰éœ€è¦ï¼‰

#### 4. é…ç½®å¯åŠ¨å‘½ä»¤

Railway ä¼šè‡ªåŠ¨æ£€æµ‹ `requirements.txt`ï¼Œä½†éœ€è¦é…ç½®å¯åŠ¨å‘½ä»¤ï¼š

**åˆ›å»º `Procfile` æ–‡ä»¶**ï¼š

```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º Procfile
@"
web: streamlit run app/web/material_generator_app.py --server.port \$PORT --server.address 0.0.0.0
"@ | Out-File -FilePath Procfile -Encoding utf8 -NoNewline
```

#### 5. æäº¤å¹¶æŽ¨é€

```powershell
cd D:\mlflow_learning_project
git add Procfile
git commit -m "Add Railway deployment configuration"
git push origin main
```

Railway ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°éƒ¨ç½²ã€‚

#### 6. èŽ·å–è®¿é—®é“¾æŽ¥

éƒ¨ç½²å®ŒæˆåŽï¼š
- Railway ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª URLï¼ˆå¦‚ï¼š`https://xxx.up.railway.app`ï¼‰
- åœ¨é¡¹ç›®é¡µé¢ç‚¹å‡» "Settings" â†’ "Generate Domain" å¯ä»¥è‡ªå®šä¹‰åŸŸå

---

## æ–¹æ¡ˆäºŒï¼šRender éƒ¨ç½²ï¼ˆæŽ¨èâ­â­â­â­ï¼‰

### ä¼˜ç‚¹
- âœ… å…è´¹ç‰ˆå¯ç”¨ï¼ˆæœ‰ sleep ä½†å¯é…ç½®ï¼‰
- âœ… ç®€å•æ˜“ç”¨
- âœ… æ”¯æŒè‡ªåŠ¨éƒ¨ç½²
- âœ… å›½å†…è®¿é—®è¾ƒå¥½

### éƒ¨ç½²æ­¥éª¤

#### 1. æ³¨å†Œ Render è´¦å·

```powershell
# è®¿é—® Render å®˜ç½‘
# https://render.com
# ä½¿ç”¨ GitHub è´¦å·ç™»å½•
```

#### 2. åˆ›å»º Web Service

1. ç™»å½• Render
2. ç‚¹å‡» "New" â†’ "Web Service"
3. è¿žæŽ¥ GitHub ä»“åº“ï¼š`Andylee56-cyber/drone-material-generator`
4. é…ç½®å¦‚ä¸‹ï¼š
   - **Name**: `drone-material-generator`
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `streamlit run app/web/material_generator_app.py --server.port $PORT --server.address 0.0.0.0`

#### 3. é…ç½®çŽ¯å¢ƒå˜é‡

åœ¨ Render çš„ Environment Variables ä¸­æ·»åŠ ï¼ˆå¦‚æžœéœ€è¦ï¼‰ï¼š
- `PYTHON_VERSION=3.11`

#### 4. éƒ¨ç½²

ç‚¹å‡» "Create Web Service"ï¼ŒRender ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

#### 5. èŽ·å–è®¿é—®é“¾æŽ¥

éƒ¨ç½²å®ŒæˆåŽä¼šç”Ÿæˆ URLï¼ˆå¦‚ï¼š`https://drone-material-generator.onrender.com`ï¼‰

**æ³¨æ„**ï¼šå…è´¹ç‰ˆä¼šåœ¨ 15 åˆ†é’Ÿæ— æ´»åŠ¨åŽ sleepï¼Œé¦–æ¬¡è®¿é—®éœ€è¦ç­‰å¾…å”¤é†’ï¼ˆçº¦ 30 ç§’ï¼‰ã€‚

---

## æ–¹æ¡ˆä¸‰ï¼šFly.io éƒ¨ç½²ï¼ˆæŽ¨èâ­â­â­â­ï¼‰

### ä¼˜ç‚¹
- âœ… å…¨çƒéƒ¨ç½²ï¼Œæ€§èƒ½å¥½
- âœ… å…è´¹é¢åº¦å……è¶³
- âœ… ä¸ä¼š sleep
- âœ… æ”¯æŒè‡ªå®šä¹‰åŸŸå

### éƒ¨ç½²æ­¥éª¤

#### 1. å®‰è£… Fly CLI

```powershell
# ä¸‹è½½ Fly CLI
# https://fly.io/docs/getting-started/installing-flyctl/
# æˆ–ä½¿ç”¨ PowerShellï¼š
iwr https://fly.io/install.ps1 -useb | iex
```

#### 2. ç™»å½• Fly.io

```powershell
fly auth login
```

#### 3. åˆ›å»º Fly.io åº”ç”¨

```powershell
cd D:\mlflow_learning_project
fly launch
```

æŒ‰æç¤ºæ“ä½œï¼š
- é€‰æ‹©åº”ç”¨åç§°
- é€‰æ‹©åŒºåŸŸï¼ˆæŽ¨èé€‰æ‹©ç¦»ä¸­å›½è¿‘çš„ï¼Œå¦‚ `sin` æ–°åŠ å¡ï¼‰
- ä¸åˆ›å»º Postgresï¼ˆé€‰æ‹© Noï¼‰

#### 4. åˆ›å»º `fly.toml` é…ç½®æ–‡ä»¶

```powershell
# åˆ›å»º fly.toml
@"
app = "drone-material-generator"
primary_region = "sin"

[build]

[env]
  PORT = "8080"

[[services]]
  internal_port = 8080
  protocol = "tcp"

  [[services.ports]]
    handlers = ["http"]
    port = 80
    force_https = true

  [[services.ports]]
    handlers = ["tls", "http"]
    port = 443

  [services.concurrency]
    type = "requests"
    hard_limit = 25
    soft_limit = 20

[[services.http_checks]]
  interval = "10s"
  timeout = "2s"
  grace_period = "5s"
  method = "GET"
  path = "/_stcore/health"
"@ | Out-File -FilePath fly.toml -Encoding utf8
```

#### 5. åˆ›å»º Dockerfile

```powershell
# åˆ›å»º Dockerfile
@"
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8080

CMD streamlit run app/web/material_generator_app.py --server.port 8080 --server.address 0.0.0.0
"@ | Out-File -FilePath Dockerfile -Encoding utf8
```

#### 6. éƒ¨ç½²

```powershell
fly deploy
```

#### 7. èŽ·å–è®¿é—®é“¾æŽ¥

éƒ¨ç½²å®ŒæˆåŽä¼šæ˜¾ç¤º URLï¼ˆå¦‚ï¼š`https://drone-material-generator.fly.dev`ï¼‰

---

## æ–¹æ¡ˆå››ï¼šå›½å†…äº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæœ€ç¨³å®šâ­â­â­â­â­ï¼‰

### æŽ¨èæœåŠ¡å•†
- **é˜¿é‡Œäº‘**ï¼šhttps://www.aliyun.com
- **è…¾è®¯äº‘**ï¼šhttps://cloud.tencent.com
- **åŽä¸ºäº‘**ï¼šhttps://www.huaweicloud.com

### éƒ¨ç½²æ­¥éª¤ï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰

#### 1. è´­ä¹°äº‘æœåŠ¡å™¨

- é€‰æ‹©ï¼š**è½»é‡åº”ç”¨æœåŠ¡å™¨** æˆ– **ECS**
- é…ç½®æŽ¨èï¼š
  - CPU: 2æ ¸
  - å†…å­˜: 4GB
  - ç³»ç»Ÿ: Ubuntu 22.04
  - å¸¦å®½: 3-5Mbps

#### 2. è¿žæŽ¥æœåŠ¡å™¨

```powershell
# ä½¿ç”¨ SSH è¿žæŽ¥ï¼ˆWindows å¯ä»¥ä½¿ç”¨ PowerShell æˆ– PuTTYï¼‰
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

#### 3. å®‰è£…ä¾èµ–

```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£… Python 3.11
apt install python3.11 python3.11-venv python3-pip -y

# å®‰è£… Git
apt install git -y
```

#### 4. å…‹éš†é¡¹ç›®

```bash
cd /opt
git clone https://github.com/Andylee56-cyber/drone-material-generator.git
cd drone-material-generator
```

#### 5. åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒå¹¶å®‰è£…ä¾èµ–

```bash
python3.11 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

#### 6. é…ç½® Streamlit

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p ~/.streamlit
cat > ~/.streamlit/config.toml << EOF
[server]
port = 8501
address = "0.0.0.0"
headless = true
enableCORS = false
enableXsrfProtection = true

[browser]
gatherUsageStats = false
EOF
```

#### 7. ä½¿ç”¨ systemd åˆ›å»ºæœåŠ¡ï¼ˆç¡®ä¿ 24/7 è¿è¡Œï¼‰

```bash
# åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo cat > /etc/systemd/system/streamlit-app.service << EOF
[Unit]
Description=Streamlit App
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/drone-material-generator
Environment="PATH=/opt/drone-material-generator/venv/bin"
ExecStart=/opt/drone-material-generator/venv/bin/streamlit run app/web/material_generator_app.py --server.port 8501 --server.address 0.0.0.0
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable streamlit-app
sudo systemctl start streamlit-app

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status streamlit-app
```

#### 8. é…ç½®é˜²ç«å¢™

```bash
# å¼€æ”¾ 8501 ç«¯å£
sudo ufw allow 8501/tcp
sudo ufw reload
```

#### 9. è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://ä½ çš„æœåŠ¡å™¨IP:8501`

#### 10. é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æžœéœ€è¦ä½¿ç”¨åŸŸåï¼š
1. è´­ä¹°åŸŸåï¼ˆå¦‚ï¼šé˜¿é‡Œäº‘åŸŸåï¼‰
2. è§£æžåŸŸååˆ°æœåŠ¡å™¨ IP
3. ä½¿ç”¨ Nginx é…ç½®åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

---

## æ–¹æ¡ˆäº”ï¼šDocker + ä»»æ„äº‘æœåŠ¡

### åˆ›å»º Dockerfile

```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º Dockerfile
@"
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    libgl1-mesa-glx \
    libglib2.0-0 \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£… Python ä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8501

# å¯åŠ¨å‘½ä»¤
CMD ["streamlit", "run", "app/web/material_generator_app.py", "--server.port", "8501", "--server.address", "0.0.0.0"]
"@ | Out-File -FilePath Dockerfile -Encoding utf8
```

### åˆ›å»º .dockerignore

```powershell
@"
__pycache__
*.pyc
*.pyo
*.pyd
.Python
venv/
env/
.venv
.git
.gitignore
*.md
.DS_Store
"@ | Out-File -FilePath .dockerignore -Encoding utf8
```

### æž„å»ºå’Œè¿è¡Œ

```bash
# æž„å»ºé•œåƒ
docker build -t drone-material-generator .

# è¿è¡Œå®¹å™¨
docker run -d -p 8501:8501 --name drone-app drone-material-generator

# æŸ¥çœ‹æ—¥å¿—
docker logs -f drone-app
```

---

## ðŸŽ¯ å¿«é€Ÿé€‰æ‹©å»ºè®®

### å¦‚æžœé¢„ç®—æœ‰é™ï¼ŒæŽ¨èï¼š
1. **Railway**ï¼ˆæœ€ç®€å•ï¼Œå…è´¹é¢åº¦å……è¶³ï¼‰
2. **Fly.io**ï¼ˆæ€§èƒ½å¥½ï¼Œå…è´¹é¢åº¦å……è¶³ï¼‰

### å¦‚æžœéœ€è¦æœ€ç¨³å®šï¼ŒæŽ¨èï¼š
1. **å›½å†…äº‘æœåŠ¡å™¨**ï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘ï¼Œæœ€ç¨³å®šï¼‰
2. **Railway ä»˜è´¹ç‰ˆ**ï¼ˆ$5/æœˆèµ·ï¼Œç¨³å®šå¯é ï¼‰

### å¦‚æžœéœ€è¦æœ€å¿«éƒ¨ç½²ï¼ŒæŽ¨èï¼š
1. **Railway**ï¼ˆ5 åˆ†é’Ÿå®Œæˆéƒ¨ç½²ï¼‰
2. **Render**ï¼ˆ10 åˆ†é’Ÿå®Œæˆéƒ¨ç½²ï¼‰

---

## ðŸ“ éƒ¨ç½²åŽæ£€æŸ¥æ¸…å•

- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½æ­£å¸¸
- [ ] ç”Ÿæˆç´ æåŠŸèƒ½æ­£å¸¸
- [ ] å¢žå¼ºè®­ç»ƒåŠŸèƒ½æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯è®¿é—®æ­£å¸¸
- [ ] 24/7 ç¨³å®šè¿è¡Œï¼ˆä¸ sleepï¼‰

---

## ðŸ”§ å¸¸è§é—®é¢˜

### Q1: Railway å…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ
**A**: Railway æä¾› $5/æœˆå…è´¹é¢åº¦ï¼Œå¯¹äºŽä¸ªäººé¡¹ç›®é€šå¸¸è¶³å¤Ÿã€‚å¦‚æžœè¶…å‡ºï¼Œå¯ä»¥å‡çº§åˆ°ä»˜è´¹ç‰ˆã€‚

### Q2: Render å…è´¹ç‰ˆä¼š sleep å—ï¼Ÿ
**A**: æ˜¯çš„ï¼Œå…è´¹ç‰ˆä¼šåœ¨ 15 åˆ†é’Ÿæ— æ´»åŠ¨åŽ sleepï¼Œé¦–æ¬¡è®¿é—®éœ€è¦ç­‰å¾…çº¦ 30 ç§’å”¤é†’ã€‚

### Q3: å›½å†…äº‘æœåŠ¡å™¨éœ€è¦å¤‡æ¡ˆå—ï¼Ÿ
**A**: å¦‚æžœä½¿ç”¨åŸŸåä¸”æ˜¯ .com/.cn ç­‰åŸŸåï¼Œéœ€è¦å¤‡æ¡ˆã€‚å¦‚æžœç›´æŽ¥ä½¿ç”¨ IP è®¿é—®ï¼Œä¸éœ€è¦å¤‡æ¡ˆã€‚

### Q4: å¦‚ä½•ç¡®ä¿åº”ç”¨ 24/7 è¿è¡Œï¼Ÿ
**A**: 
- Railway/Fly.ioï¼šè‡ªåŠ¨ä¿æŒè¿è¡Œ
- Render å…è´¹ç‰ˆï¼šä¼š sleepï¼Œä»˜è´¹ç‰ˆä¸ä¼š
- äº‘æœåŠ¡å™¨ï¼šä½¿ç”¨ systemd æœåŠ¡ç¡®ä¿è‡ªåŠ¨é‡å¯

---

## ðŸš€ ç«‹å³å¼€å§‹

**æŽ¨èä»Ž Railway å¼€å§‹**ï¼Œæœ€ç®€å•å¿«é€Ÿï¼š

```powershell
# 1. åˆ›å»º Procfile
@"
web: streamlit run app/web/material_generator_app.py --server.port \$PORT --server.address 0.0.0.0
"@ | Out-File -FilePath Procfile -Encoding utf8

# 2. æäº¤åˆ° GitHub
cd D:\mlflow_learning_project
git add Procfile
git commit -m "Add Railway deployment configuration"
git push origin main

# 3. è®¿é—® https://railway.app å¹¶éƒ¨ç½²
```

**éƒ¨ç½²å®ŒæˆåŽï¼Œåº”ç”¨å°† 24/7 ç¨³å®šè¿è¡Œï¼Œéšæ—¶éšåœ°å¯è®¿é—®ï¼** ðŸŽ‰

