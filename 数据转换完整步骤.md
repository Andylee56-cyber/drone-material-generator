# LabelMe JSON è½¬ COCO æ ¼å¼ - å®Œæ•´æ­¥éª¤

## ğŸ“‹ å‰ææ¡ä»¶
- âœ… å·²å®Œæˆ LabelMe æ ‡æ³¨ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½æœ‰å¯¹åº”çš„ `.json` æ–‡ä»¶
- âœ… å·²æ¿€æ´» `drone_vision_advanced` ç¯å¢ƒ

## ğŸ”„ æ­¥éª¤ 1: å®‰è£…è½¬æ¢å·¥å…·

åœ¨ PowerShell ä¸­æ‰§è¡Œï¼š

```powershell
# æ¿€æ´»ç¯å¢ƒ
conda activate drone_vision_advanced

# å®‰è£… labelme2coco
pip install labelme2coco
```

## ğŸ”„ æ­¥éª¤ 2: è½¬æ¢ LabelMe JSON ä¸º COCO æ ¼å¼

**é‡è¦**ï¼šè¯·å°†ä¸‹é¢çš„è·¯å¾„æ›¿æ¢ä¸ºä½ å®é™…çš„ LabelMe JSON æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚

### æ–¹æ³• A: å¦‚æœæ•°æ®åœ¨ `C:\Windows\System32\data\raw` ç›®å½•ä¸‹

```powershell
# è½¬æ¢é“è·¯æ•°æ®ï¼ˆåŒ…å« narrow, muddy, extreme_weather å­æ–‡ä»¶å¤¹ï¼‰
labelme2coco "C:\Windows\System32\data\raw\roads" --output "data\datasets\road_segmentation\coco.json"

# è½¬æ¢å†œç”°æ•°æ®
labelme2coco "C:\Windows\System32\data\raw\farmland" --output "data\datasets\farmland_segmentation\coco.json"
```

### æ–¹æ³• B: å¦‚æœæ•°æ®åœ¨å…¶ä»–è·¯å¾„

è¯·å°†è·¯å¾„æ›¿æ¢ä¸ºä½ çš„å®é™…è·¯å¾„ï¼š

```powershell
# æ›¿æ¢ <YOUR_ROADS_PATH> ä¸ºä½ çš„é“è·¯æ•°æ®è·¯å¾„
labelme2coco "<YOUR_ROADS_PATH>" --output "data\datasets\road_segmentation\coco.json"

# æ›¿æ¢ <YOUR_FARMLAND_PATH> ä¸ºä½ çš„å†œç”°æ•°æ®è·¯å¾„
labelme2coco "<YOUR_FARMLAND_PATH>" --output "data\datasets\farmland_segmentation\coco.json"
```

### æ–¹æ³• C: ä½¿ç”¨äº¤äº’å¼è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
.\scripts\convert_labelme_to_coco.ps1
```

è„šæœ¬ä¼šæç¤ºä½ è¾“å…¥æ•°æ®è·¯å¾„ã€‚

## ğŸ”„ æ­¥éª¤ 3: éªŒè¯è½¬æ¢ç»“æœ

```powershell
# éªŒè¯é“è·¯æ•°æ®
python scripts\verify_coco_data.py "data\datasets\road_segmentation\coco.json"

# éªŒè¯å†œç”°æ•°æ®
python scripts\verify_coco_data.py "data\datasets\farmland_segmentation\coco.json"
```

## ğŸ”„ æ­¥éª¤ 4: åˆ’åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†

```powershell
# åˆ’åˆ†é“è·¯æ•°æ®é›†ï¼ˆ80% è®­ç»ƒï¼Œ20% éªŒè¯ï¼‰
python scripts\split_dataset.py `
    --input "data\datasets\road_segmentation\coco.json" `
    --output "data\datasets\road_segmentation" `
    --train-ratio 0.8 `
    --val-ratio 0.2

# åˆ’åˆ†å†œç”°æ•°æ®é›†
python scripts\split_dataset.py `
    --input "data\datasets\farmland_segmentation\coco.json" `
    --output "data\datasets\farmland_segmentation" `
    --train-ratio 0.8 `
    --val-ratio 0.2
```

## ğŸ”„ æ­¥éª¤ 5: éªŒè¯åˆ’åˆ†åçš„æ•°æ®é›†

```powershell
# éªŒè¯è®­ç»ƒé›†
python scripts\verify_coco_data.py "data\datasets\road_segmentation\coco_train.json"
python scripts\verify_coco_data.py "data\datasets\farmland_segmentation\coco_train.json"

# éªŒè¯éªŒè¯é›†
python scripts\verify_coco_data.py "data\datasets\road_segmentation\coco_val.json"
python scripts\verify_coco_data.py "data\datasets\farmland_segmentation\coco_val.json"
```

## ğŸ“ æœ€ç»ˆç›®å½•ç»“æ„

è½¬æ¢å’Œåˆ’åˆ†å®Œæˆåï¼Œç›®å½•ç»“æ„åº”è¯¥æ˜¯ï¼š

```
data/
â”œâ”€â”€ datasets/
â”‚   â”œâ”€â”€ road_segmentation/
â”‚   â”‚   â”œâ”€â”€ coco.json              # åŸå§‹åˆå¹¶çš„ COCO æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ coco_train.json        # è®­ç»ƒé›† COCO æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ coco_val.json          # éªŒè¯é›† COCO æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ train/
â”‚   â”‚   â”‚   â””â”€â”€ images/            # è®­ç»ƒé›†å›¾ç‰‡
â”‚   â”‚   â””â”€â”€ val/
â”‚   â”‚       â””â”€â”€ images/            # éªŒè¯é›†å›¾ç‰‡
â”‚   â””â”€â”€ farmland_segmentation/
â”‚       â”œâ”€â”€ coco.json
â”‚       â”œâ”€â”€ coco_train.json
â”‚       â”œâ”€â”€ coco_val.json
â”‚       â”œâ”€â”€ train/
â”‚       â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ val/
â”‚           â””â”€â”€ images/
```

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: `labelme2coco` å‘½ä»¤æœªæ‰¾åˆ°
**è§£å†³**ï¼šç¡®ä¿å·²å®‰è£…å¹¶æ¿€æ´»äº†æ­£ç¡®çš„ç¯å¢ƒ
```powershell
pip install labelme2coco
```

### é—®é¢˜ 2: æ‰¾ä¸åˆ° JSON æ–‡ä»¶
**è§£å†³**ï¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿è·¯å¾„ä¸­åŒ…å« `.json` æ–‡ä»¶
```powershell
# æ£€æŸ¥è·¯å¾„ä¸‹æ˜¯å¦æœ‰ JSON æ–‡ä»¶
Get-ChildItem "<YOUR_PATH>" -Filter "*.json" | Select-Object Name
```

### é—®é¢˜ 3: è½¬æ¢åç±»åˆ«åç§°ä¸æ­£ç¡®
**è§£å†³**ï¼šæ£€æŸ¥ LabelMe æ ‡æ³¨æ—¶çš„ç±»åˆ«åç§°æ˜¯å¦ä¸€è‡´
- é“è·¯ï¼š`road_narrow`, `road_muddy`, `road_extreme`
- å†œç”°ï¼š`farmland` æˆ–å…·ä½“ä½œç‰©åç§°

### é—®é¢˜ 4: å›¾åƒæ–‡ä»¶æ‰¾ä¸åˆ°
**è§£å†³**ï¼šç¡®ä¿å›¾åƒæ–‡ä»¶å’Œ JSON æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œä¸”æ–‡ä»¶ååŒ¹é…ï¼ˆé™¤äº†æ‰©å±•åï¼‰

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] å·²å®‰è£… `labelme2coco`
- [ ] é“è·¯æ•°æ®å·²è½¬æ¢ä¸º COCO æ ¼å¼
- [ ] å†œç”°æ•°æ®å·²è½¬æ¢ä¸º COCO æ ¼å¼
- [ ] å·²éªŒè¯è½¬æ¢åçš„ COCO æ–‡ä»¶
- [ ] å·²åˆ’åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†
- [ ] å·²éªŒè¯åˆ’åˆ†åçš„æ•°æ®é›†
- [ ] ç›®å½•ç»“æ„æ­£ç¡®

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œå³å¯è¿›å…¥ Day 2-3 çš„æ¨¡å‹å¼€å‘é˜¶æ®µï¼

